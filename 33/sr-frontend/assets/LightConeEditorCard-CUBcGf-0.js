import{V as $,a3 as x,m as u,r as l,aw as k,o as a,a9 as w,S as y,p as d,I as D,z as f,T as S,by as I,a4 as p,bz as v}from"./index-CjRshVQl.js";import{u as K}from"./PathIcon-BmOVGhGF.js";import{l as _,g as A,M as b,D as L}from"./StatDisplay-HhiMQoQa.js";import{G,d as M,L as N}from"./BusinessCenter-BppyZUsn.js";import"./UploadCard-Cr_1OWL1.js";import{C as T}from"./useForceUpdate-oJGK-H5Q.js";import{C as j,G as m}from"./Grid-BqieEmz2.js";function J(s){const{database:e}=$();return K(e.lightCones,s??"")}function P(s){return x.lightCone[s]}function Q(s,e){return Object.fromEntries(x.lightCone[s].superimpose.otherStats.map((t,o)=>[o+1,t[e]]))}function B({lcKey:s,setLCKey:e,label:t=""}){const{t:o}=u(["lightCone","lightConeNames_gen"]);t=t||o("editor.lightConeName");const n=l.useMemo(()=>k.map(i=>({key:i,label:o(`lightConeNames_gen:${i}`)})),[o]),c=l.useCallback(i=>e(i??""),[e]),r=l.useCallback(i=>i?a(w,{size:2,sx:{width:"auto"},src:_(i,"cover")}):void 0,[]);return a(l.Suspense,{fallback:a(y,{variant:"text",width:100}),children:a(G,{options:n,valueKey:s,onChange:c,toImg:r,label:t})})}function R({lcKey:s}){return a(A,{ns:"lightConeNames_gen",key18:s})}function U({onClose:s,lightCone:e,setLightCone:t,footer:o,hideLocation:n=!1}){const{t:c}=u(["lightCone","common"]);return d(f,{bgt:"dark",children:[a(T,{title:"Light Cone Editor",action:a(D,{onClick:s,children:a(M,{})})}),d(j,{sx:{display:"flex",flexDirection:"column",gap:1},children:[d(m,{container:!0,spacing:1,columns:{xs:1,md:2},children:[a(m,{item:!0,xs:1,md:!0,display:"flex",flexDirection:"column",children:a(B,{lcKey:(e==null?void 0:e.key)??"",setLCKey:r=>t({key:r}),label:e!=null&&e.key?"":c("editor.unknownLightCone")})}),a(m,{item:!0,xs:!0,md:"auto",display:"flex",children:a(E,{superimpose:(e==null?void 0:e.superimpose)??1,setSuperimposition:r=>t({superimpose:r}),disabled:!(e!=null&&e.key)})})]}),d(m,{container:!0,spacing:1,columns:{xs:1,md:4},marginBottom:1,children:[a(m,{item:!0,xs:1,display:"flex",flexDirection:"row",gap:1,children:a(z,{level:e==null?void 0:e.level,ascension:e==null?void 0:e.ascension,setLevelAscension:(r,i)=>{t({level:r,ascension:i})},disabled:!(e!=null&&e.key)})}),a(m,{item:!0,xs:1,display:"flex",gap:1,children:a(f,{bgt:"light",sx:{p:1,flexGrow:1,alignContent:"center"},children:a(l.Suspense,{fallback:a(y,{width:"60%"}),children:d(S,{color:"text.secondary",align:"center",children:[c("editor.ascension")," ",(e==null?void 0:e.ascension)||0]})})})}),!n&&a(m,{item:!0,xs:1,md:2,display:"flex",flexDirection:"column",gap:1,children:a(N,{locKey:(e==null?void 0:e.location)??"",setLocKey:r=>t({location:r})})})]}),o]})]})}function E({superimpose:s,setSuperimposition:e,disabled:t=!1}){const{t:o}=u("lightCone_gen");return a(L,{title:`${o("superimpose")} ${s}`,color:"primary",disabled:t,fullWidth:!0,children:I.map(n=>d(b,{selected:s===n,disabled:s===n,onClick:()=>e(n),children:[o("superimpose")," ",n]},n))})}function z({level:s,ascension:e,setLevelAscension:t,disabled:o=!1}){const{t:n}=u(["common_gen","common"]);return a(L,{title:s?`${n("lv")} ${s}/${p[e??0]}`:n("common:selectlevel"),color:"primary",disabled:o,fullWidth:!0,children:v.map(([c,r])=>a(b,{selected:s===c&&e===r,disabled:s===c&&e===r,onClick:()=>t(c,r),children:c===p[r]?`${n("lv")} ${c}`:`${n("lv")} ${c}/${p[r]}`},`${c}/${r}`))})}export{R as L,U as a,Q as b,B as c,P as g,J as u};
